<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

    <title>STFGAMES - Robot Fostena Game</title>

</head>

<body>
    

    <div class="container">

        <h1 style="padding-top: 40px;">Robot Fostena Game</h1>

        <div><button id="subir" class="btn btn-success">Subir Laberinto</button></div>

        <div id="uploadArea" style="display: none;">
            <textarea id="mapa" style="min-width: 400px; min-height: 300px;" placeholder="Ingresa el mapa del juego aquí"></textarea>
        
            <br>
            <button id="inicia" class="btn btn-success">Iniciar el Juego</button>

            <button id="toggle-obstacles" style="display: none;">Mostrar obstáculos</button>
            
            <div id="game-board"></div>
        </div>
    </div>

    
<script>

    document.getElementById('subir').addEventListener('click', uploadMap);

    document.getElementById('inicia').addEventListener('click', startGame);

    document.getElementById('toggle-obstacles').addEventListener('click', toggleObstacles);


    // Muestra el campo para subir el Mapa
    function uploadMap(){
        const uploadArea = document.getElementById('uploadArea');
        uploadArea.style.display = 'block';
    }
    

    // Inicia el juego

    function startGame() {
        const mapInput = document.getElementById('mapa').value;

        const [mapData, legendData] = mapInput.split('\n\n');

        map = mapData.split('\n').map(row => row.split(''));

        const legend = legendData.split('\n').reduce((acc, line) => {
            const [key, value] = line.split(':');
            acc[key] = value;
            return acc;
        }, {});

        renderBoard(legend);
        document.getElementById('toggle-obstacles').style.display = 'block';
        document.addEventListener('keydown', handleKeyPress);
    }



</script>


</body>